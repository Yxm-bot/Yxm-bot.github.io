window.__require=function t(e,o,n){function r(c,a){if(!o[c]){if(!e[c]){var u=c.split("/");if(u=u[u.length-1],!e[u]){var p="function"==typeof __require&&__require;if(!a&&p)return p(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+c+"'")}c=u}var s=o[c]={exports:{}};e[c][0].call(s.exports,function(t){return r(e[c][1][t]||t)},s,s.exports,t,e,o,n)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({AnimatorController:[function(t,e,o){"use strict";cc._RF.push(e,"19fd2GWf9pInas7KKsVsR9P","AnimatorController"),Object.defineProperty(o,"__esModule",{value:!0}),o.AnimatorController=void 0;var n=function(){function t(t){this.animAtor=t}return t.prototype.playAnim=function(t,e){void 0===e&&(e=!0),this.animAtor.playAdditive(t)},t}();o.AnimatorController=n,cc._RF.pop()},{}],Array:[function(t,e,o){"use strict";cc._RF.push(e,"64276FC9oRKo4sg7aAlJUgM","Array");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.remove=function(t){var e=this.indexOf(t);if(e>-1)return this.splice(e,1)},e.prototype.clean=function(t){for(var e=0;e<this.length;++e)t(this[e])&&delete this[e];var o=0;for(e=0;e<this.length;++e)void 0!==this[e]&&(this[o]=this[e],++o);this.length=o},e.prototype.unique=function(){this.sort();for(var t=0,e=0;e<this.length;++e)this[e]!==this[t]&&(this[++t]=this[e]);this.splice(t+1)},e.prototype.moveItem=function(t,e){for(var o=0;o<this.length;++o)if(this[o]===t){var n=o+e;if(n>=0&&n<this.length){var r=t;this[o]=this[n],this[n]=r}break}},e}(Array);o.default=i,cc._RF.pop()},{}],Arrow:[function(t,e,o){"use strict";cc._RF.push(e,"36cd4WZPStOK6t3JGgiVnwh","Arrow");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Weapon"),a=t("../../manager/Singleton"),u=t("../../manager/GroundManager"),p=cc._decorator,s=p.ccclass,l=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.GetAttackGrounds=function(){for(var t=a.default.getManager(u.default).GetGroundByIndexAndDirection(this.Owner.Ground.Index,this.Owner.Direction),e=1;e<t.length;e++){var o=t[e];if(o&&o.Role)return[o]}return[void 0]},e.prototype.Attack=function(){cc.log("\u5f13\u7bad\u653b\u51fb");var t=this.GetAttackGrounds()[0];t&&t.Role&&t.Role.TakeDamage(this),this.AttackFinish()},i([s],e)}(c.default));o.default=l,cc._RF.pop()},{"../../manager/GroundManager":"GroundManager","../../manager/Singleton":"Singleton","./Weapon":"Weapon"}],AssetController:[function(t,e,o){"use strict";cc._RF.push(e,"dbdcfm9BidJB47qp/ISGKFH","AssetController");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function c(t){try{u(n.next(t))}catch(e){i(e)}}function a(t){try{u(n.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(c,a)}u((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return u([t,e])}}function u(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(a){i=[6,a],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.AssetController=void 0;var i,c=t("../sdk/SdkChoose");(function(t){t[t.not=0]="not",t[t.downloading=1]="downloading",t[t.complete=2]="complete"})(i||(i={}));var a=function(){this.state=i.not,this.callbackQueue=[]},u=["Gameplay","GamePage","GameOverPage"],p=function(){function t(){this.loadItems={},this.loadRemote={};for(var t=0;t<u.length;t++)this.loadItems[u[t]]=new a}return t.prototype.getLoadItemByName=function(t){return this.loadItems[t]},t.prototype.getRes=function(t,e){return this.getLoadItemByName(t).bundle.get(e)},t.prototype.loadBundleAsset=function(t,e,o,n){var r=this.getLoadItemByName(t).bundle;r&&(n?r.loadDir(e,n,o):r.loadDir(e,o))},t.prototype.loadRes=function(t,e,o,n,r,i){var c=this.getLoadItemByName(t),a=c.bundle;a?this.switchScene(a,e,o,n,i):(this.checkDownLoad(t,r),c.callbackQueue.push({bundleName:t,resPath:e,cb:o,caller:n,sceneFlag:i}))},t.prototype.switchScene=function(t,e,o,n,r){function i(t,e){t||o.bind(n)(e)}r?t.loadScene(e,i):t.load(e,i)},t.prototype.onDownloadingSuccess=function(t){var e=this;cc.assetManager.loadBundle(t,function(o,n){if(o)cc.log("loadBundle-Fail:"+o);else{var r=e.getLoadItemByName(t);r.bundle=n,r.state=i.complete,r.callbackQueue.forEach(function(t){e.switchScene(n,t.resPath,t.cb,t.caller,t.sceneFlag)}),r.callbackQueue.length=0}})},t.prototype.onDownloadingFail=function(t,e){cc.log("download:"+t+",Fail:"+e)},t.prototype.checkDownLoad=function(t,e){var o=this.getLoadItemByName(t);o.state===i.not&&(o.state=i.downloading,c.default.loadSubpackage(t,e))},t.prototype.backStageDownload=function(){for(var t in this.loadItems)this.checkDownLoad(t)},t.prototype.loadUrl=function(t,e,o){return n(this,void 0,void 0,function(){var n,i=this;return r(this,function(){return cc.log("loadUrl:"+t),n=!1,this.loadRemote[t]||(this.loadRemote[t]=[],n=!0),this.loadRemote[t].push({cb:e,caller:o}),n?(cc.assetManager.loadRemote(t,{ext:".png"},function(e,o){e?cc.warn("loadUrlFail:"+e):(i.loadRemote[t].forEach(function(t){t.cb.bind(t.caller)(o)}),i.loadRemote[t].length=0,delete i.loadRemote[t])}),[2]):[2]})})},t}();o.AssetController=p;var s=new p;window.assetController=s,o.default=s,cc._RF.pop()},{"../sdk/SdkChoose":"SdkChoose"}],AudioManager:[function(t,e,o){"use strict";cc._RF.push(e,"edfa5PdOXNDIo6nOlpBPx3w","AudioManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../utils/Utils"),a=t("../utils/LogicEventDispatcher"),u=cc._decorator,p=u.ccclass,s=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gridIncorrect=null,e}return r(e,t),Object.defineProperty(e.prototype,"canPlayMusic",{get:function(){return this.data.canPlayMusic},set:function(t){t?this.playMusic(this.bgmClip,!0):this.stopMusic(),this.data.canPlayMusic=t,c.default.setData("musicDataStr",this.data),a.default.emit("canPlayChange")},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=c.default.getData("musicDataStr");t?this.data=t:(this.data={canPlayMusic:!0},c.default.setData("musicDataStr",this.data))},e.prototype.playMusic=function(t,e){t&&(e||this.bgmClip!==t)&&(this.bgmClip=t,this.stopMusic(),cc.audioEngine.playMusic(t,!0))},e.prototype.stopMusic=function(){cc.audioEngine.stopMusic()},e.prototype.playSound=function(t,e){return void 0===e&&(e=!1),cc.audioEngine.playEffect(t,e)},e.prototype.stopSound=function(t){cc.audioEngine.stopEffect(t)},i([p],e)}(cc.Component));o.default=s,cc._RF.pop()},{"../utils/LogicEventDispatcher":"LogicEventDispatcher","../utils/Utils":"Utils"}],CallBackInfoWithArgs:[function(t,e,o){"use strict";cc._RF.push(e,"1f348xz3PpCNIRxIhcskQN+","CallBackInfoWithArgs");var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<o;e++)for(var i=arguments[e],c=0,a=i.length;c<a;c++,r++)n[r]=i[c];return n};Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function t(t,e){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];this.callback=t,this.caller=e,this.args=o}return t.prototype.start=function(){var t;(t=this.callback).call.apply(t,n([this.caller],this.args))},t}();o.default=r,cc._RF.pop()},{}],CallBackInfo:[function(t,e,o){"use strict";cc._RF.push(e,"a9c34pmEEhL7r3NX2NmsB14","CallBackInfo");var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<o;e++)for(var i=arguments[e],c=0,a=i.length;c<a;c++,r++)n[r]=i[c];return n};Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function t(t,e){this.callback=t,this.caller=e}return t.prototype.onCall=function(){for(var t,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return(t=this.callback).call.apply(t,n([this.caller],e))},t.prototype.onDestroy=function(){this.callback=null,this.caller=null},t}();o.default=r,cc._RF.pop()},{}],Constant:[function(t,e,o){"use strict";cc._RF.push(e,"4c8acwVygJKEpNlr/uvpWnC","Constant"),Object.defineProperty(o,"__esModule",{value:!0}),o.DirectionReverse=o.MAX_PLAYER_SPECIAL_SKILL_COOL_DOWN=o.MAX_EQUIP_COUNT=o.Direction=void 0,function(t){t[t.Left=-1]="Left",t[t.Right=1]="Right"}(o.Direction||(o.Direction={})),o.MAX_EQUIP_COUNT=3,o.MAX_PLAYER_SPECIAL_SKILL_COOL_DOWN=4,o.DirectionReverse=function(t){return-t},cc._RF.pop()},{}],DebugManager:[function(t,e,o){"use strict";cc._RF.push(e,"84a8bezozFDQIQsAHDrrHZ6","DebugManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,u=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),i([a],e)}(cc.Component));o.default=u,cc._RF.pop()},{}],DoubleKnife:[function(t,e,o){"use strict";cc._RF.push(e,"a7f64+VIMNA6bEZUcL3l+Ix","DoubleKnife");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Weapon"),a=t("../../manager/Singleton"),u=t("../../utils/Constant"),p=t("../../manager/GroundManager"),s=cc._decorator,l=s.ccclass,f=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.GetAttackGrounds=function(){var t=a.default.getManager(p.default).GetGroundByIndexAndDirection(this.Owner.Ground.Index,u.Direction.Left),e=a.default.getManager(p.default).GetGroundByIndexAndDirection(this.Owner.Ground.Index,u.Direction.Right);return[t[1],e[1]]},e.prototype.Attack=function(){cc.log("\u53cc\u5200\u653b\u51fb");var t=this.GetAttackGrounds(),e=this;t.map(function(t){t&&t.Role&&t.Role.TakeDamage(e)}),this.AttackFinish()},i([l],e)}(c.default));o.default=f,cc._RF.pop()},{"../../manager/GroundManager":"GroundManager","../../manager/Singleton":"Singleton","../../utils/Constant":"Constant","./Weapon":"Weapon"}],EnemyManager:[function(t,e,o){"use strict";cc._RF.push(e,"57bc6j/t+FLN4vQgHVKPkRm","EnemyManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../utils/Array"),a=cc._decorator,u=a.ccclass,p=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Enemies=new c.default,e}return r(e,t),Object.defineProperty(e.prototype,"AliveEnemyCount",{get:function(){return this.Enemies.length},enumerable:!1,configurable:!0}),i([u],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../utils/Array":"Array"}],Enemy:[function(t,e,o){"use strict";cc._RF.push(e,"858a4nkKLlA041Lj+aJtXLE","Enemy");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.EnemyWeaponList=o.ActionNoticeType=void 0;var c,a=t("./../Role"),u=t("../../../manager/Singleton"),p=t("../../../utils/Constant"),s=t("../../weapon/WeaponInfo"),l=t("../../weapon/Weapon"),f=t("../../../utils/MathUtils");(function(t){t[t.None=0]="None",t[t.MoveNext=1]="MoveNext",t[t.MovePrevious=2]="MovePrevious",t[t.TurnAround=3]="TurnAround",t[t.Attack=4]="Attack",t[t.Equip=5]="Equip"})(c=o.ActionNoticeType||(o.ActionNoticeType={}));var h=cc._decorator,d=h.ccclass,y=h.property,g=function(){function t(){this.Weapons=[]}return i([y([s.default])],t.prototype,"Weapons",void 0),i([d("EnemyWeaponList")],t)}();o.EnemyWeaponList=g;var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NoticeLabel=null,e.EnemyWeaponList=[],e.WeaponsListNow=null,e.ActionDone=!1,e.m_ActionNotice=null,e}return r(e,t),Object.defineProperty(e.prototype,"ActionNotice",{get:function(){return this.m_ActionNotice},set:function(t){this.m_ActionNotice=t,this.SetActionNotice()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"IsStageFirstRound",{get:function(){return 0===u.default.LevelManager.LevelNow.StageNow.Round},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Player",{get:function(){return u.default.GameManager.Player},enumerable:!1,configurable:!0}),e.prototype.Init=function(e){var o;this.roleTy=a.roleType.isEnmey,t.prototype.Init.call(this,e),this.Direction=Math.random()>.5?p.Direction.Left:p.Direction.Right,u.default.EnemyManager.Enemies.push(this),this.ActionDict=((o={})[c.None]=this.Stay.bind(this),o[c.MoveNext]=this.TryMoveToNextGround.bind(this),o[c.MovePrevious]=this.TryMoveToPreviousGround.bind(this),o[c.TurnAround]=this.TurnAround.bind(this),o[c.Attack]=this.Attack.bind(this),o[c.Equip]=this.EquipWeapon.bind(this),o);var n=this;this.EnemyWeaponList.map(function(t){t.Weapons.map(function(t){l.default.CreateWeapon(t,n.WeaponTempNode,n).node.active=!1})}),this.ChooseWeaponList()},e.prototype.ChooseWeaponList=function(){this.WeaponsListNow=this.EnemyWeaponList[f.default.RandomRangeInt(0,this.EnemyWeaponList.length-1)]},e.prototype.CheckFaceToPlayer=function(){return-1!==u.default.GroundManager.GetGroundByIndexAndDirection(this.Ground.Index,this.Direction).indexOf(this.Player.Ground)},e.prototype.CheckEquipEnough=function(){return this.EquipNode.childrenCount===this.WeaponsListNow.Weapons.length},e.prototype.CheckFirstEquipWeaponAttackPlayer=function(){return this.EquipNode.getComponentInChildren(l.default).CheckAttackPlayer()},e.prototype.EquipWeapon=function(){var t=this.EquipNode.childrenCount,e=this.WeaponsListNow.Weapons[t].WeaponName;this.Equip(this.FindWeaponInTemp(e))},e.prototype.FindWeaponInTemp=function(t){return this.WeaponTempNode.getComponentsInChildren(l.default).find(function(e){return e.WeaponName===t})},e.prototype.TurnAround=function(){t.prototype.TurnAround.call(this),this.AfterActionDone()},e.prototype.AfterActionDone=function(){this.IsStageFirstRound?this.ActionFinish():this.StartAI()},e.prototype.StartAI=function(){this.ActionFinish()},e.prototype.CheckMoveNext=function(){var t=u.default.GroundManager.GetGroundByIndexAndDirection(this.Ground.Index,this.Direction);return t[1]&&!t[1].Role},e.prototype.CheckMoveBack=function(){var t=u.default.GroundManager.GetGroundByIndexAndDirection(this.Ground.Index,p.DirectionReverse(this.Direction));return t[1]&&!t[1].Role},e.prototype.AttackFinish=function(){this.ChooseWeaponList(),t.prototype.AttackFinish.call(this)},e.prototype.ActionStart=function(){if(null!==this.ActionNotice){var t=this.ActionNotice;this.ActionNotice=null,this.ActionDict[t]()}else this.Stay()},e.prototype.SetActionNotice=function(){var t="\u7a7a";this.ActionNotice===c.None?t="\u65e0":this.ActionNotice===c.Attack?t="\u653b\u51fb":this.ActionNotice===c.Equip?t="\u88c5\u5907":this.ActionNotice===c.MoveNext?t="\u5411\u524d\u8fdb":this.ActionNotice===c.MovePrevious?t="\u5411\u540e\u9000":this.ActionNotice===c.TurnAround&&(t="\u8f6c\u8eab"),this.NoticeLabel.string=t},e.prototype.Stay=function(){t.prototype.Stay.call(this)},e.prototype.ActionFinish=function(){t.prototype.ActionFinish.call(this),this.ActionDone=!0,u.default.RoundManager.CheckEnemyAction()},e.prototype.OnRoundOver=function(){this.ActionDone=!1},e.prototype.TryMoveToNextGround=function(){var t=u.default.GroundManager.GetGroundByIndexAndDirection(this.Ground.Index,this.Direction)[1];this.IsCanMoveToGround(t)?(this.MoveToGround(t),this.AfterActionDone()):this.Stay()},e.prototype.TryMoveToPreviousGround=function(){var t=u.default.GroundManager.GetGroundByIndexAndDirection(this.Ground.Index,p.DirectionReverse(this.Direction))[1];this.IsCanMoveToGround(t)?(this.MoveToGround(t),this.AfterActionDone()):this.Stay()},e.prototype.Equip=function(e){t.prototype.Equip.call(this,e),this.OnEquipEnd(),this.AfterActionDone()},e.prototype.OnEquipEnd=function(){},e.prototype.Dead=function(){t.prototype.Dead.call(this),u.default.EnemyManager.Enemies.remove(this)},e.prototype.isDead=function(){var t=this;setTimeout(function(){t.node.destroy()},1e3)},e.prototype.onDestroy=function(){this.ActionDict=null,t.prototype.onDestroy.call(this)},i([y(cc.Label)],e.prototype,"NoticeLabel",void 0),i([y([g])],e.prototype,"EnemyWeaponList",void 0),i([d],e)}(a.default);o.default=v,cc._RF.pop()},{"../../../manager/Singleton":"Singleton","../../../utils/Constant":"Constant","../../../utils/MathUtils":"MathUtils","../../weapon/Weapon":"Weapon","../../weapon/WeaponInfo":"WeaponInfo","./../Role":"Role"}],FlashToGroundManager:[function(t,e,o){"use strict";cc._RF.push(e,"0998akAbARATqp38USXmAxg","FlashToGroundManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,u=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.Flash=function(t,e){var o=e.Ground,n=t.Role;e.ChangeGround(t),n.ChangeGround(o)},i([a],e)}(cc.Component));o.default=u,cc._RF.pop()},{}],GameManager:[function(t,e,o){"use strict";cc._RF.push(e,"aa318QufFtNq6F8iYCWFBN7","GameManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Singleton"),a=t("../com/role/Role"),u=t("./PanelManager"),p=cc._decorator,s=p.ccclass,l=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PlayerPrefab=null,e.RoleNode=null,e.PlayerWeaponsNode=null,e.IsPlaying=!1,e}return r(e,t),e.prototype.start=function(){this.OnLevelReady();var t=this;this.setLandscape(),setTimeout(function(){t.OnLevelStart()},0)},e.prototype.OnLevelReady=function(){this.Player=a.default.CreateRole(this.PlayerPrefab,null),c.default.LevelManager.OnLevelReady(),c.default.PanelManager.createUI("GamePage",u.UIType.Page)},e.prototype.OnLevelStart=function(){var t=c.default.LevelManager;this.Player.InitPlayerWeapon(),t.OnLevelStart(),this.IsPlaying=!0,c.default.RoundManager.OnRoundStart()},e.prototype.OnPlayerDead=function(){cc.log("\u73a9\u5bb6\u6b7b\u4ea1\u6e38\u620f\u7ed3\u675f"),this.OnGameFinish()},e.prototype.OnLevelFinish=function(){cc.log("\u5173\u5361\u5b8c\u6210"),this.OnGameFinish()},e.prototype.OnGameFinish=function(){var t=this;this.IsPlaying=!1,c.default.InputManager.logicCanInput=!1,setTimeout(function(){t.destoryRes(),c.default.PanelManager.createUI("GameOverPage",u.UIType.Page)},1e3)},e.prototype.destoryRes=function(){c.default.LevelManager.clearLevel(),c.default.GroundManager.clearGround(),this.RoleNode.destroyAllChildren(),this.PlayerWeaponsNode.destroyAllChildren()},e.prototype.onPlayerDead=function(){},e.prototype.setLandscape=function(){cc.sys.isNative&&cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","changeOrientation","(I)V",0):cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS||cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE),cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE),cc.view.getFrameSize().height<cc.view.getFrameSize().width?cc.view.getFrameSize().width:cc.view.getFrameSize().height,cc.view.getFrameSize().height>cc.view.getFrameSize().width?cc.view.getFrameSize().width:cc.view.getFrameSize().height,console.log("width=="+cc.view.getFrameSize().width+"==="+cc.view.getFrameSize().height),cc.view.setFrameSize(cc.view.getFrameSize().height,cc.view.getFrameSize().width),cc.view.setDesignResolutionSize(1136,640,cc.ResolutionPolicy.FIXED_HEIGHT)},i([l(cc.Prefab)],e.prototype,"PlayerPrefab",void 0),i([l(cc.Node)],e.prototype,"RoleNode",void 0),i([l(cc.Node)],e.prototype,"PlayerWeaponsNode",void 0),i([s],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../com/role/Role":"Role","./PanelManager":"PanelManager","./Singleton":"Singleton"}],GameOverPage:[function(t,e,o){"use strict";cc._RF.push(e,"55577JN4xtKAbf3fvhO3KKc","GameOverPage");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./manager/Singleton"),a=cc._decorator,u=a.ccclass,p=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.againGame=function(){console.log("zaiwanyiju===="),c.default.GameManager.OnLevelReady(),setTimeout(function(){c.default.GameManager.OnLevelStart()},0)},i([u],e)}(cc.Component));o.default=p,cc._RF.pop()},{"./manager/Singleton":"Singleton"}],GamePage:[function(t,e,o){"use strict";cc._RF.push(e,"db352d+1P1JmqHsPTRCQ4YY","GamePage");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./utils/LogicEventDispatcher"),a=t("./manager/Singleton"),u=t("./utils/Constant"),p=cc._decorator,s=p.ccclass,l=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.WeaponPanel=null,e.UpWeaponBtn=null,e.DownWeaponBtn=null,e.UnEquipBtn=null,e.TurnBtn=null,e.RightBtn=null,e.LeftBtn=null,e.StayBtn=null,e.AttackBtn=null,e.Weapon=null,e}return r(e,t),Object.defineProperty(e.prototype,"Player",{get:function(){return a.default.GameManager.Player},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"CanInput",{get:function(){return a.default.InputManager.canInput},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.UpWeaponBtn.node.on("click",this.OnUpWeaponClick,this),this.DownWeaponBtn.node.on("click",this.OnDownWeaponBtn,this),this.UnEquipBtn.node.on("click",this.OnUnEquipBtnBtn,this),this.TurnBtn.node.on("click",this.OnTurnBtnClick,this),this.RightBtn.node.on("click",this.OnRightBtnClick,this),this.LeftBtn.node.on("click",this.OnLeftBtnClick,this),this.StayBtn.node.on("click",this.OnStayBtnClick,this),this.AttackBtn.node.on("click",this.OnAttackBtnClick,this),c.default.on("OnPlayerEquipWeaponClick",this.OnPlayerEquipWeaponClick,this),this.WeaponPanel.active=!1},e.prototype.OnTurnBtnClick=function(){this.CanInput&&this.Player.TurnAround()},e.prototype.OnRightBtnClick=function(){this.CanInput&&this.Player.OnDirectionBtnClick(u.Direction.Right)},e.prototype.OnLeftBtnClick=function(){this.CanInput&&this.Player.OnDirectionBtnClick(u.Direction.Left)},e.prototype.OnStayBtnClick=function(){this.CanInput&&this.Player.Stay()},e.prototype.OnAttackBtnClick=function(){this.CanInput&&this.Player.Attack()},e.prototype.OnPlayerEquipWeaponClick=function(t){this.Weapon=t,this.SetWeaponPanelActive(!0)},e.prototype.SetWeaponPanelActive=function(t){this.WeaponPanel.active=t},e.prototype.OnUpWeaponClick=function(){var t=this.Weapon.node.parent.childrenCount,e=this.Weapon.node.getSiblingIndex();e!==t-1&&(this.Weapon.node.setSiblingIndex(++e),this.AfterWeaponBtnClick())},e.prototype.OnDownWeaponBtn=function(){var t=this.Weapon.node.getSiblingIndex();0!==t&&(this.Weapon.node.setSiblingIndex(--t),this.AfterWeaponBtnClick())},e.prototype.OnUnEquipBtnBtn=function(){this.Player.UnEquip(this.Weapon),this.AfterWeaponBtnClick()},e.prototype.AfterWeaponBtnClick=function(){this.Weapon=null,this.SetWeaponPanelActive(!1)},e.prototype.onDestroy=function(){c.default.targetOff(this)},i([l(cc.Node)],e.prototype,"WeaponPanel",void 0),i([l(cc.Button)],e.prototype,"UpWeaponBtn",void 0),i([l(cc.Button)],e.prototype,"DownWeaponBtn",void 0),i([l(cc.Button)],e.prototype,"UnEquipBtn",void 0),i([l(cc.Button)],e.prototype,"TurnBtn",void 0),i([l(cc.Button)],e.prototype,"RightBtn",void 0),i([l(cc.Button)],e.prototype,"LeftBtn",void 0),i([l(cc.Button)],e.prototype,"StayBtn",void 0),i([l(cc.Button)],e.prototype,"AttackBtn",void 0),i([s],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./manager/Singleton":"Singleton","./utils/Constant":"Constant","./utils/LogicEventDispatcher":"LogicEventDispatcher"}],GroundManager:[function(t,e,o){"use strict";cc._RF.push(e,"a30013NvNxI9YFvs9BsL1l0","GroundManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../com/Ground"),a=t("../utils/Constant"),u=t("../utils/Utils"),p=cc._decorator,s=p.ccclass,l=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Grounds=[],e.GroundPrefab=null,e.Ground=null,e}return r(e,t),e.prototype.GetGrounds=function(){return this.Ground.getComponentsInChildren(c.default)},e.prototype.GetCenterGround=function(){var t=this.GetGrounds();return t[Math.floor(t.length/2)]},e.prototype.GetRandomNoRoleGrounds=function(){for(var t=this.GetGrounds(),e=[],o=0;o<t.length;o++)t[o].Role||e.push(t[o]);return u.default.shuffle(e)},e.prototype.GetGroundByIndexAndDirection=function(t,e){var o=this.GetGrounds();return e===a.Direction.Left?o.slice(0,t+1).reverse():e===a.Direction.Right?o.slice(t):void 0},Object.defineProperty(e.prototype,"NoRoleGroundCount",{get:function(){for(var t=this.GetGrounds(),e=0,o=0;o<t.length;o++)t[o].Role||e++;return e},enumerable:!1,configurable:!0}),e.prototype.clearGround=function(){this.Grounds=[],this.Ground.destroyAllChildren()},i([l(cc.Prefab)],e.prototype,"GroundPrefab",void 0),i([l(cc.Node)],e.prototype,"Ground",void 0),i([s],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../com/Ground":"Ground","../utils/Constant":"Constant","../utils/Utils":"Utils"}],Ground:[function(t,e,o){"use strict";cc._RF.push(e,"21120kuKj5PJ517L6YxZ5dQ","Ground");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./role/Role"),a=cc._decorator,u=a.ccclass,p=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Index=0,e.Other=null,e.Role=null,e.color=null,e}return r(e,t),e.prototype.ChangeRole=function(t){this.Role=t,this.color.color=this.changeColor(null),this.Role&&(this.color.color=this.changeColor(t.roleTy),this.Role.node.x=this.node.x)},e.prototype.onDestroy=function(){this.Other=null,this.Role=null},e.prototype.changeColor=function(t){var e;switch(t){case c.roleType.isPlayer:e=new cc.Color(195,190,177);break;case c.roleType.isEnmey:e=new cc.Color(190,14,67);break;default:e=new cc.Color(103,100,91)}return e},e.prototype.destorNode=function(){this.node.destroy()},i([p(cc.Node)],e.prototype,"color",void 0),i([u],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./role/Role":"Role"}],H5Sdk:[function(t,e,o){"use strict";cc._RF.push(e,"06015ecfhpBWZB2lwByegoX","H5Sdk"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../manager/AssetController"),r=function(){function t(){}return t.prototype.vibration=function(){console.log("\u9707\u52d5===="),window.navigator.vibrate&&window.navigator.vibrate([200,100,200])},t.prototype.loadSubpackage=function(t){n.default.onDownloadingSuccess(t,!0)},t}();o.default=r,cc._RF.pop()},{"../manager/AssetController":"AssetController"}],HpItemVisual:[function(t,e,o){"use strict";cc._RF.push(e,"ddd61SQ/S5Mt4ZRAX+B4hTL","HpItemVisual");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UnActive=null,e.Active=null,e}return r(e,t),e.prototype.UpdateActive=function(t){this.UnActive.active=!t,this.Active.active=t},i([u(cc.Node)],e.prototype,"UnActive",void 0),i([u(cc.Node)],e.prototype,"Active",void 0),i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],HpVisual:[function(t,e,o){"use strict";cc._RF.push(e,"0f70eBBKgpB0LJUVW0gV7F0","HpVisual");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./HpItemVisual"),a=cc._decorator,u=a.ccclass,p=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Layout=null,e.ItemPrefab=null,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.AddCount=function(t){for(var e=0;e<t;e++){var o=cc.instantiate(this.ItemPrefab);this.Layout.addChild(o),o.getComponent(c.default).UpdateActive(!0)}var n=this.Layout.getComponent(cc.Layout),r=this.Layout.childrenCount;r<5?(n.resizeMode=cc.Layout.ResizeMode.CONTAINER,this.Layout.width=(r-1)*n.spacingX+r*this.ItemPrefab.data.width):(n.resizeMode=cc.Layout.ResizeMode.NONE,this.Layout.width=4*n.spacingX+5*this.ItemPrefab.data.width),n.updateLayout()},e.prototype.UpdateActive=function(t){for(var e=0;e<this.Layout.childrenCount;e++)this.Layout.children[e].getComponent(c.default).UpdateActive(e<t)},i([p(cc.Node)],e.prototype,"Layout",void 0),i([p(cc.Prefab)],e.prototype,"ItemPrefab",void 0),i([u],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./HpItemVisual":"HpItemVisual"}],InputManager:[function(t,e,o){"use strict";cc._RF.push(e,"bfde1QWshdBmK7Jv7gD+nKK","InputManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,u=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.logicCanInput=!1,e}return r(e,t),Object.defineProperty(e.prototype,"canInput",{get:function(){return this.logicCanInput},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){cc.macro.ENABLE_MULTI_TOUCH=!1},i([a],e)}(cc.Component));o.default=u,cc._RF.pop()},{}],KnifeEnemy:[function(t,e,o){"use strict";cc._RF.push(e,"1e1e3Qy0gxE54CMeLM3ElLU","KnifeEnemy");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a=t("./Enemy"),u=cc._decorator,p=u.ccclass;u.property,function(t){t.idle="enemy1Idle",t.attack="enemy1Attack"}(c||(c={}));var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.IsAttacked=!1,e.IsEquipEnough=!1,e}return r(e,t),e.prototype.ActionStart=function(){t.prototype.ActionStart.call(this)},e.prototype.ActionFinish=function(){t.prototype.ActionFinish.call(this)},e.prototype.AttackFinish=function(){this.IsAttacked=!0,t.prototype.AttackFinish.call(this)},e.prototype.OnEquipEnd=function(){this.CheckEquipEnough()&&(this.IsEquipEnough=!0)},e.prototype.StartAI=function(){var e=this.IsAttacked;this.IsAttacked=!1;var o=this.IsEquipEnough;this.IsEquipEnough=!1,this.CheckFaceToPlayer()?e?this.CheckMoveBack()&&(this.ActionNotice=a.ActionNoticeType.MovePrevious):this.CheckEquipEnough()?o?this.ActionNotice=a.ActionNoticeType.None:this.CheckFirstEquipWeaponAttackPlayer()?this.ActionNotice=a.ActionNoticeType.Attack:this.CheckMoveNext()?this.ActionNotice=a.ActionNoticeType.MoveNext:this.ActionNotice=a.ActionNoticeType.None:this.ActionNotice=a.ActionNoticeType.Equip:this.ActionNotice=a.ActionNoticeType.TurnAround,t.prototype.StartAI.call(this)},e.prototype.PlayAnim=function(){this.animatorColl.playAnim(c.attack)},i([p],e)}(a.default);o.default=s,cc._RF.pop()},{"./Enemy":"Enemy"}],Knife:[function(t,e,o){"use strict";cc._RF.push(e,"a8c50gWKPpBtoF7bD8zHh0L","Knife");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Weapon"),a=t("../../manager/Singleton"),u=t("../../manager/GroundManager"),p=cc._decorator,s=p.ccclass,l=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.GetAttackGrounds=function(){return[a.default.getManager(u.default).GetGroundByIndexAndDirection(this.Owner.Ground.Index,this.Owner.Direction)[1]]},e.prototype.Attack=function(){cc.log("\u5c0f\u5200\u653b\u51fb");var t=this.GetAttackGrounds()[0];t&&t.Role&&t.Role.TakeDamage(this),this.AttackFinish()},i([s],e)}(c.default));o.default=l,cc._RF.pop()},{"../../manager/GroundManager":"GroundManager","../../manager/Singleton":"Singleton","./Weapon":"Weapon"}],LevelManager:[function(t,e,o){"use strict";cc._RF.push(e,"56aa8G5ml9JxpICYi7FAfZ+","LevelManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Singleton"),a=t("../utils/Utils"),u=cc._decorator,p=u.ccclass,s=u.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.LevelConfigs=[],e.LevelNode=null,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.OnLevelChoose=function(t){var e=cc.instantiate(t);this.LevelNode.addChild(e);var o=cc.instantiate(a.default.getPrefab("Gameplay","Prefab/LevelConfig","bg"));this.LevelNode.addChild(o),this.LevelNow=e.getComponent("Level"),this.LevelNow.Init()},e.prototype.OnLevelReady=function(){var t=Math.round(Math.random()*(this.LevelConfigs.length-1));console.log("rand==="+t+"==leng=="+this.LevelConfigs.length),this.OnLevelChoose(this.LevelConfigs[t]),this.LevelNow.OnLevelReady()},e.prototype.OnLevelStart=function(){this.LevelNow.OnLevelStart()},e.prototype.OnLevelPass=function(){c.default.GameManager.OnLevelFinish()},e.prototype.clearLevel=function(){this.LevelNode.destroyAllChildren()},i([s([cc.Prefab])],e.prototype,"LevelConfigs",void 0),i([s(cc.Node)],e.prototype,"LevelNode",void 0),i([p],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../utils/Utils":"Utils","./Singleton":"Singleton"}],Level:[function(t,e,o){"use strict";cc._RF.push(e,"56ecdYPTuFKSZFLGiZ3TCMg","Level");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Stage"),a=t("../../manager/Singleton"),u=cc._decorator,p=u.ccclass,s=u.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Stages=[],e}return r(e,t),Object.defineProperty(e.prototype,"IsLastStage",{get:function(){return this.Stages.indexOf(this.StageNow)===this.Stages.length-1},enumerable:!1,configurable:!0}),e.prototype.Init=function(){var t=this;this.Stages.map(function(e){e.Init(t)})},e.prototype.OnLevelReady=function(){this.StageNow=this.Stages[0],this.StageNow.OnStageReady()},e.prototype.OnLevelStart=function(){this.StageNow.OnLevelStart()},e.prototype.OnStagePass=function(){if(this.IsLastStage)this.OnLevelPass();else{var t=this.Stages.indexOf(this.StageNow);this.StageNow=this.Stages[t+1],this.StageNow.OnStageReady()}},e.prototype.OnRoundOver=function(){this.StageNow.OnRoundOver()},e.prototype.OnLevelPass=function(){a.default.LevelManager.OnLevelPass()},i([s([c.default])],e.prototype,"Stages",void 0),i([p],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../manager/Singleton":"Singleton","./Stage":"Stage"}],LoadingPage:[function(t,e,o){"use strict";cc._RF.push(e,"514cdqgsCBGfavFtuznATSo","LoadingPage");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./manager/AssetController"),a=cc._decorator,u=a.ccclass,p=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progress=null,e.btn=null,e}return r(e,t),e.prototype.onLoad=function(){var t=this;cc.view.enableAntiAlias(!0),this.btn.node.on("click",this.onBtnClick,this),this.btn.node.active=!1,this.progress.progress=0;var e=this;c.default.loadRes("Gameplay","Image/AutoAtlas",function(){c.default.loadBundleAsset("Gameplay","./",function(){e.btn.node.active=!0,e.progress.node.active=!1},t.onProgressUpdate.bind(t))},this)},e.prototype.onProgressUpdate=function(t,e){this.progress.progress=t/e},e.prototype.onBtnClick=function(){c.default.loadRes("Gameplay","Game",function(t){cc.director.runScene(t)},null,null,!0)},i([p(cc.ProgressBar)],e.prototype,"progress",void 0),i([p(cc.Button)],e.prototype,"btn",void 0),i([u],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./manager/AssetController":"AssetController"}],LogicEventDispatcher:[function(t,e,o){"use strict";cc._RF.push(e,"b849bTXkx5AKbxFDtevH0SZ","LogicEventDispatcher"),Object.defineProperty(o,"__esModule",{value:!0});var n=new cc.EventTarget;window.logicEventDispatcher=n,o.default=n,cc._RF.pop()},{}],MathUtils:[function(t,e,o){"use strict";cc._RF.push(e,"3a29c6RXYtNyaXPxMe4v7G4","MathUtils"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.lerp=function(t,e,o){return t+(e-t)*o},t.Clamp=function(t,e,o){return Math.min(Math.max(t,e),o)},t.Clamp01=function(t){return Math.min(Math.max(t,0),1)},t.saturate=function(e){return t.Clamp(e,0,1)},t.equalsV2=function(t,e){return t.x===e.x&&t.y===e.y},t.RandomInt=function(t){return Math.floor(Math.random()*t)},t.RandomRange=function(t,e){var o=Math.random();return t*o+(1-o)*e},t.RandomRangeInt=function(t,e){var o=Math.random();return Math.floor(t*o+(1-o)*e)},t.RoundToInt=function(t){var e=Math.abs(t-parseInt(t));e.toFixed(0);var o=0;if(.5===e){var n=Math.ceil(t),r=Math.floor(t);o=n%2==0?n:r}else o=Math.round(t);return o},t.Deg2Rad=.0174532924,t.Rad2Deg=57.29578,t}();o.default=n,window.MathUtils=n,cc._RF.pop()},{}],MoveToGroundManager:[function(t,e,o){"use strict";cc._RF.push(e,"ce7fb6BU2FFR6HgVlEFZX/v","MoveToGroundManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Singleton"),a=cc._decorator,u=a.ccclass,p=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.Move=function(t,e){for(var o=t.Ground,n=c.default.GroundManager.GetGroundByIndexAndDirection(o.Index,e),r=o,i=0;i<n.length;i++){var a=n[i],u=n[i+1];if(u&&u.Role||!u){r=a;break}}o!==r&&(o.ChangeRole(null),t.ChangeGround(r))},i([u],e)}(cc.Component));o.default=p,cc._RF.pop()},{"./Singleton":"Singleton"}],PanelManager:[function(t,e,o){"use strict";cc._RF.push(e,"c9e69MWq3ZAPqp9bI+OCtVK","PanelManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.UIType=void 0;var c,a=t("./AssetController"),u=cc._decorator,p=u.ccclass,s=u.property;(function(t){t[t.Page=0]="Page",t[t.Dialog=1]="Dialog"})(c=o.UIType||(o.UIType={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.UIs=[],e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.removeUI=function(t){var e=this.UIs[t],o=e.children[e.childrenCount-1];o&&cc.isValid(o)&&(e.removeChild(o),o.destroy());var n=e.children[e.childrenCount-1];n&&cc.isValid(o)&&(n.active=!0)},e.prototype.createUI=function(t,e){var o=this;a.default.loadRes(t,t,function(n){var r=cc.instantiate(n);r.name=t;var i=o.UIs[e];i.children.map(function(t){t.active=!1}),i.addChild(r)},this)},e.prototype.closeAllByType=function(t){this.UIs[t].destroyAllChildren()},e.prototype.closeAll=function(){this.closeAllByType(c.Page),this.closeAllByType(c.Dialog)},i([s([cc.Node])],e.prototype,"UIs",void 0),i([p],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./AssetController":"AssetController"}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"09eb6y17XZFn6dUZb+9ZJOT","Player");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a=t("./Role"),u=t("../../manager/Singleton"),p=t("../../utils/Constant"),s=t("../weapon/WeaponInfo"),l=t("../weapon/Weapon");(function(t){t.idle="roleIdle",t.attack="roleAttack"})(c||(c={}));var f=cc._decorator,h=f.ccclass,d=f.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SpecialCoolDownNowLabel=null,e.InitialWeapons=[],e.m_SpecialCoolDownNow=0,e.RoundKillCount=0,e}return r(e,t),Object.defineProperty(e.prototype,"SpecialCoolDownNow",{get:function(){return this.m_SpecialCoolDownNow},set:function(t){this.m_SpecialCoolDownNow=t,this.SpecialCoolDownNowLabel.node.active=0!==t,this.SpecialCoolDownNowLabel.string=this.SpecialCoolDownNow.toString()},enumerable:!1,configurable:!0}),e.prototype.Init=function(e){this.roleTy=a.roleType.isPlayer,t.prototype.Init.call(this,e),this.Direction=p.Direction.Left},e.prototype.OnStageReady=function(){var t=u.default.GroundManager.GetCenterGround();this.ChangeGround(t),this.SpecialCoolDownNow=0},e.prototype.InitPlayerWeapon=function(){var t=u.default.GameManager.PlayerWeaponsNode,e=this;this.InitialWeapons.map(function(o){l.default.CreateWeapon(o,t,e,!1,!0)})},e.prototype.ActionStart=function(){u.default.InputManager.logicCanInput=!0},e.prototype.ActionFinish=function(){u.default.InputManager.logicCanInput=!1,u.default.RoundManager.OnPlayerActionFinish()},e.prototype.Dead=function(){t.prototype.Dead.call(this)},e.prototype.isDead=function(){setTimeout(function(){u.default.GameManager.OnPlayerDead()},2e3)},e.prototype.AfterActionDone=function(){this.ActionFinish()},e.prototype.PlayAnim=function(){this.animatorColl.playAnim(c.attack)},e.prototype.OnDirectionBtnClick=function(t){if(this.Direction===t){var e=u.default.GroundManager.GetGroundByIndexAndDirection(this.Ground.Index,this.Direction)[1];e&&e.Role?this.TryPlayerSkill(e.Role):this.TryMoveToNextGround()}else this.TryMoveToPreviousGround()},e.prototype.TryPlayerSkill=function(t){this.SpecialCoolDownNow>0||(u.default.SwitchGroundManager.Switch(this,t),this.OnSpecialFinish())},e.prototype.OnSpecialFinish=function(){this.SpecialCoolDownNow=p.MAX_PLAYER_SPECIAL_SKILL_COOL_DOWN,this.AfterActionDone()},e.prototype.TryMoveToNextGround=function(){var t=u.default.GroundManager.GetGroundByIndexAndDirection(this.Ground.Index,this.Direction)[1];this.IsCanMoveToGround(t)&&(this.MoveToGround(t),this.AfterActionDone())},e.prototype.TryMoveToPreviousGround=function(){var t=u.default.GroundManager.GetGroundByIndexAndDirection(this.Ground.Index,p.DirectionReverse(this.Direction))[1];this.IsCanMoveToGround(t)&&(this.MoveToGround(t),this.AfterActionDone())},e.prototype.TurnAround=function(){t.prototype.TurnAround.call(this),this.AfterActionDone()},e.prototype.Equip=function(e){t.prototype.Equip.call(this,e),e.IsInPlayerWeapons=!1,e.IsPlayerEquip=!0,this.AfterActionDone()},e.prototype.UnEquip=function(t){t.MoveToPlayerWeapons(!0)},e.prototype.OnRoundOver=function(){this.SpecialCoolDownNow>0&&this.SpecialCoolDownNow--,this.RoundKillCount=0},e.prototype.AttackFinish=function(){t.prototype.AttackFinish.call(this),this.WeaponTempNode.getComponentsInChildren(l.default).map(function(t){t.node.active=!0,t.MoveToPlayerWeapons(!1)})},i([d(cc.Label)],e.prototype,"SpecialCoolDownNowLabel",void 0),i([d([s.default])],e.prototype,"InitialWeapons",void 0),i([h],e)}(a.default);o.default=y,cc._RF.pop()},{"../../manager/Singleton":"Singleton","../../utils/Constant":"Constant","../weapon/Weapon":"Weapon","../weapon/WeaponInfo":"WeaponInfo","./Role":"Role"}],PoolManager:[function(t,e,o){"use strict";cc._RF.push(e,"7a863H1MwxEAL4OJKNHLws4","PoolManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.PoolInfo=o.PoolType=void 0;var c,a=t("../utils/Utils"),u=cc._decorator,p=u.ccclass,s=u.property;(function(t){t[t.Enemy=0]="Enemy",t[t.Boom=1]="Boom",t[t.Bullet=2]="Bullet",t[t.LittleBullet=3]="LittleBullet",t[t.Exp=4]="Exp"})(c=o.PoolType||(o.PoolType={}));var l=function(){function t(){this.poolType=c.Enemy,this.maxCount=0,this.prefab=null,this.pool=new cc.NodePool}return i([s({type:cc.Enum(c)})],t.prototype,"poolType",void 0),i([s(cc.Integer)],t.prototype,"maxCount",void 0),i([p("PoolInfo")],t)}();o.PoolInfo=l;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pools=[],e.poolMap=new Map,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.Init=function(){for(var t=0;t<this.pools.length;t++){var e=this.pools[t];e.prefab=a.default.getPrefab("Gameplay","Prefab",c[e.poolType]),this.poolMap[e.poolType]=e}},e.prototype.getItem=function(t,e){void 0===e&&(e=null);var o,n=this.poolMap[t];if(n){var r=n.pool;if(r.size()>0)return r.get();o=n.prefab}else o=e;return cc.instantiate(o)},e.prototype.putItem=function(t,e){var o=this.poolMap[t];if(o){var n=o.pool;n.size()<o.maxCount?n.put(e):e.destroy()}else e.destroy()},i([s({type:[l]})],e.prototype,"pools",void 0),i([p()],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../utils/Utils":"Utils"}],Role:[function(t,e,o){"use strict";cc._RF.push(e,"64eeeT9mfNEwocTqv4o67E1","Role");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.roleType=void 0;var c=t("../../utils/Constant"),a=t("../../manager/Singleton"),u=t("./hp/HpVisual"),p=t("../../utils/LogicEventDispatcher"),s=t("../weapon/Weapon"),l=t("../../manager/AnimatorController"),f=cc._decorator,h=f.ccclass,d=f.property;(function(t){t[t.isPlayer=0]="isPlayer",t[t.isEnmey=1]="isEnmey"})(o.roleType||(o.roleType={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.RoleName="role",e.m_HpMax=0,e.WeaponTempNode=null,e.DirectionNode=null,e.EquipNode=null,e.anim=null,e.HpVisual=null,e.Ground=null,e.m_HpNow=0,e.m_Direction=c.Direction.Left,e.IsDead=!1,e.isWhite=!1,e.nowWhite=.1,e}var o;return r(e,t),o=e,e.CreateRole=function(t,e){var n=cc.instantiate(t);a.default.getManager("GameManager").RoleNode.addChild(n);var r=n.getComponent(o);return r.Init(e),r},Object.defineProperty(e.prototype,"HpMax",{get:function(){return this.m_HpMax},set:function(t){var e=this.m_HpMax;this.m_HpMax=t,this.m_HpMax=Math.max(0,this.m_HpMax);var o=this.m_HpMax-e;this.HpVisual.AddCount(o),this.HpNow+=o},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HpNow",{get:function(){return this.m_HpNow},set:function(t){this.m_HpNow=t,this.m_HpNow=Math.min(this.m_HpMax,Math.max(0,this.m_HpNow)),this.HpVisual.UpdateActive(this.m_HpNow),0===this.m_HpNow&&this.Dead()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Direction",{get:function(){return this.m_Direction},set:function(t){this.m_Direction=t,this.UpdateDirection()},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){p.default.on("RoundOver",this.OnRoundOver,this)},e.prototype.Init=function(t){void 0===t&&(t=null),this.ChangeGround(t),this.HpVisual.AddCount(this.HpMax),this.HpNow=this.HpMax,this.animatorColl=new l.AnimatorController(this.anim)},e.prototype.update=function(t){if(this.isWhite){if(this.nowWhite<=0)return this.isWhite=!1,this.nowWhite=.1,void this.anim.node.getComponent(cc.Sprite).getMaterial(0).setProperty("u_rate",1);this.nowWhite+=t,this.nowWhite>=1&&(this.nowWhite=-this.nowWhite),this.anim.node.getComponent(cc.Sprite).getMaterial(0).setProperty("u_rate",this.nowWhite)}},e.prototype.Dead=function(){var t=this;this.IsDead=!0,this.Ground.ChangeRole(null),setTimeout(function(){t.hideNode(),t.DeadAnima()},600)},e.prototype.DeadAnima=function(){var t=this;cc.tween(this.DirectionNode).to(.5,{x:-100*this.m_Direction,y:50,rotation:-90*this.m_Direction},{easing:"sineOut"}).call(function(){t.isDead()}).start()},e.prototype.hideNode=function(){for(var t=0;t<this.node.childrenCount;t++)this.node.children[t].name!=this.RoleName&&(this.node.children[t].active=!1)},e.prototype.isDead=function(){},e.prototype.UpdateDirection=function(){this.DirectionNode.scaleX=this.Direction===c.Direction.Left?-1:1},e.prototype.ActionStart=function(){},e.prototype.AfterActionDone=function(){},e.prototype.ActionFinish=function(){},e.prototype.OnRoundOver=function(){},e.prototype.IsCanMoveToGround=function(t){return t&&!t.Role},e.prototype.MoveToGround=function(t){this.Ground.ChangeRole(null),this.ChangeGround(t)},e.prototype.TurnAround=function(){this.Direction=c.DirectionReverse(this.Direction)},e.prototype.Stay=function(){this.AfterActionDone()},e.prototype.ChangeGround=function(t){this.Ground=t,this.Ground&&this.Ground.ChangeRole(this)},e.prototype.Equip=function(t){t.Equip()},e.prototype.Attack=function(){0!==this.EquipNode.childrenCount&&this.TryAttack()},e.prototype.TryAttack=function(){var t=this.EquipNode.getComponentInChildren(s.default);if(!t)return this.AttackFinish();this.PlayAnim(),t.Attack()},e.prototype.PlayAnim=function(){},e.prototype.AttackFinish=function(){this.AfterActionDone()},e.prototype.TakeDamage=function(t){cc.log(this.node.name+" \u6389\u8840\uff1a"+t.Damage),this.HpNow-=t.Damage,this.IsDead&&t.KillEnemy()},e.prototype.onDestroy=function(){p.default.targetOff(this),this.ChangeGround(null)},i([d(cc.Integer)],e.prototype,"m_HpMax",void 0),i([d(cc.Node)],e.prototype,"WeaponTempNode",void 0),i([d(cc.Node)],e.prototype,"DirectionNode",void 0),i([d(cc.Node)],e.prototype,"EquipNode",void 0),i([d(cc.Animation)],e.prototype,"anim",void 0),i([d(u.default)],e.prototype,"HpVisual",void 0),o=i([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../manager/AnimatorController":"AnimatorController","../../manager/Singleton":"Singleton","../../utils/Constant":"Constant","../../utils/LogicEventDispatcher":"LogicEventDispatcher","../weapon/Weapon":"Weapon","./hp/HpVisual":"HpVisual"}],RoundManager:[function(t,e,o){"use strict";cc._RF.push(e,"a6a79nrnVdBZ58bt/Vzu+9u","RoundManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Singleton"),a=t("../utils/LogicEventDispatcher"),u=cc._decorator,p=u.ccclass,s=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"Player",{get:function(){return c.default.GameManager.Player},enumerable:!1,configurable:!0}),e.prototype.CheckEnemyAction=function(){cc.log("\u654c\u4eba\u884c\u52a8\u68c0\u6d4b");var t=c.default.EnemyManager.Enemies.find(function(t){return!t.ActionDone});t?(cc.log("\u68c0\u6d4b\u5230\u654c\u4eba\u8fdb\u884c\u884c\u52a8"),t.ActionStart()):this.OnRoundOver()},e.prototype.OnRoundStart=function(){cc.log("\u56de\u5408\u5f00\u59cb"),this.Player.ActionStart()},e.prototype.OnPlayerActionFinish=function(){this.CheckEnemyAction()},e.prototype.OnRoundOver=function(){cc.log("\u56de\u5408\u7ed3\u675f"),a.default.emit("RoundOver"),c.default.LevelManager.LevelNow.OnRoundOver(),c.default.GameManager.IsPlaying&&this.OnRoundStart()},i([p],e)}(cc.Component));o.default=s,cc._RF.pop()},{"../utils/LogicEventDispatcher":"LogicEventDispatcher","./Singleton":"Singleton"}],"RunBackward ":[function(t,e,o){"use strict";cc._RF.push(e,"fd0402AxwtOAI2JtHXbkdb+","RunBackward ");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Weapon"),a=t("../../manager/Singleton"),u=t("../../utils/Constant"),p=t("../../manager/GroundManager"),s=cc._decorator,l=s.ccclass,f=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.GetAttackGrounds=function(){for(var t=a.default.getManager(p.default).GetGroundByIndexAndDirection(this.Owner.Ground.Index,u.DirectionReverse(this.Owner.Direction)),e=1;e<t.length;e++){var o=t[e];if(o&&o.Role)return[o]}return[void 0]},e.prototype.Attack=function(){},i([l],e)}(c.default));o.default=f,cc._RF.pop()},{"../../manager/GroundManager":"GroundManager","../../manager/Singleton":"Singleton","../../utils/Constant":"Constant","./Weapon":"Weapon"}],RunForward:[function(t,e,o){"use strict";cc._RF.push(e,"2b6cfXs1ElP0pn7iqIiC7oV","RunForward");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Weapon"),a=t("../../manager/Singleton"),u=t("../../manager/GroundManager"),p=cc._decorator,s=p.ccclass,l=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.GetAttackGrounds=function(){for(var t=a.default.getManager(u.default).GetGroundByIndexAndDirection(this.Owner.Ground.Index,this.Owner.Direction),e=1;e<t.length;e++){var o=t[e];if(o&&o.Role)return[o]}return[void 0]},e.prototype.Attack=function(){cc.log("\u51b2\u523a\u653b\u51fb"),a.default.MoveToGroundManager.Move(this.Owner,this.Owner.Direction);var t=this.GetAttackGrounds()[0];t&&t.Role&&t.Role.TakeDamage(this),this.AttackFinish()},i([s],e)}(c.default));o.default=l,cc._RF.pop()},{"../../manager/GroundManager":"GroundManager","../../manager/Singleton":"Singleton","./Weapon":"Weapon"}],SdkChoose:[function(t,e,o){"use strict";cc._RF.push(e,"b4e17fBHfhEjqHbMSU695Cb","SdkChoose"),Object.defineProperty(o,"__esModule",{value:!0});var n,r=t("./WXSdk"),i=t("./H5Sdk");n=cc.sys.platform===cc.sys.WECHAT_GAME?new r.default:new i.default,o.default=n,cc._RF.pop()},{"./H5Sdk":"H5Sdk","./WXSdk":"WXSdk"}],Singleton:[function(t,e,o){"use strict";cc._RF.push(e,"8be5fGoQb9Ga47mo+65A8YU","Singleton");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,u=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return r(e,t),o=e,e.getManager=function(t){return this.ins.node.getComponentInChildren(t)},Object.defineProperty(e,"GameManager",{get:function(){return this.getManager("GameManager")},enumerable:!1,configurable:!0}),Object.defineProperty(e,"RoundManager",{get:function(){return this.getManager("RoundManager")},enumerable:!1,configurable:!0}),Object.defineProperty(e,"LevelManager",{get:function(){return this.getManager("LevelManager")},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EnemyManager",{get:function(){return this.getManager("EnemyManager")},enumerable:!1,configurable:!0}),Object.defineProperty(e,"GroundManager",{get:function(){return this.getManager("GroundManager")},enumerable:!1,configurable:!0}),Object.defineProperty(e,"InputManager",{get:function(){return this.getManager("InputManager")},enumerable:!1,configurable:!0}),Object.defineProperty(e,"PanelManager",{get:function(){return this.getManager("PanelManager")},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SwitchGroundManager",{get:function(){return this.getManager("SwitchGroundManager")},enumerable:!1,configurable:!0}),Object.defineProperty(e,"MoveToGroundManager",{get:function(){return this.getManager("MoveToGroundManager")},enumerable:!1,configurable:!0}),Object.defineProperty(e,"FlashToGroundManager",{get:function(){return this.getManager("FlashToGroundManager")},enumerable:!1,configurable:!0}),Object.defineProperty(e,"LevelBgManager",{get:function(){return this.getManager("LevelBgManager")},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){cc.game.addPersistRootNode(this.node),o.ins=this},o=i([a],e)}(cc.Component));o.default=u,window.Singleton=u,cc._RF.pop()},{}],Smoke:[function(t,e,o){"use strict";cc._RF.push(e,"17f7fdMwqpHqprN5RGrvDMY","Smoke");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Weapon"),a=t("../../manager/Singleton"),u=t("../../manager/GroundManager"),p=cc._decorator,s=p.ccclass,l=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.GetAttackGrounds=function(){for(var t=a.default.getManager(u.default).GetGroundByIndexAndDirection(this.Owner.Ground.Index,this.Owner.Direction),e=1;e<t.length;e++){var o=t[e];if(o&&o.Role)return[o]}return[void 0]},e.prototype.Attack=function(){var t=this.GetAttackGrounds()[0];if(t){var e=t.Role;a.default.FlashToGroundManager.Flash(t,this.Owner),e.TakeDamage(this)}this.AttackFinish()},i([s],e)}(c.default));o.default=l,cc._RF.pop()},{"../../manager/GroundManager":"GroundManager","../../manager/Singleton":"Singleton","./Weapon":"Weapon"}],SpearEnemy:[function(t,e,o){"use strict";cc._RF.push(e,"dcb94xH3lxBLIrDf7EdUc4O","SpearEnemy");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,a=t("./Enemy"),u=cc._decorator,p=u.ccclass;u.property,function(t){t.idle="enemy2Idle",t.attack="enemy2Attack"}(c||(c={}));var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.IsAttacked=!1,e.IsEquipEnough=!1,e}return r(e,t),e.prototype.ActionStart=function(){t.prototype.ActionStart.call(this)},e.prototype.ActionFinish=function(){t.prototype.ActionFinish.call(this)},e.prototype.AttackFinish=function(){this.IsAttacked=!0,t.prototype.AttackFinish.call(this)},e.prototype.OnEquipEnd=function(){this.CheckEquipEnough()&&(this.IsEquipEnough=!0)},e.prototype.StartAI=function(){var e=this.IsAttacked;this.IsAttacked=!1;var o=this.IsEquipEnough;this.IsEquipEnough=!1,this.CheckFaceToPlayer()?e?this.CheckMoveBack()&&(this.ActionNotice=a.ActionNoticeType.MovePrevious):this.CheckEquipEnough()?o?this.ActionNotice=a.ActionNoticeType.None:this.CheckFirstEquipWeaponAttackPlayer()?this.ActionNotice=a.ActionNoticeType.Attack:this.CheckMoveNext()?this.ActionNotice=a.ActionNoticeType.MoveNext:this.ActionNotice=a.ActionNoticeType.None:this.ActionNotice=a.ActionNoticeType.Equip:this.ActionNotice=a.ActionNoticeType.TurnAround,t.prototype.StartAI.call(this)},e.prototype.PlayAnim=function(){this.animatorColl.playAnim(c.attack)},i([p],e)}(a.default);o.default=s,cc._RF.pop()},{"./Enemy":"Enemy"}],Spear:[function(t,e,o){"use strict";cc._RF.push(e,"5856ciDglNE/5dISOwUGjnL","Spear");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Weapon"),a=t("../../manager/Singleton"),u=t("../../manager/GroundManager"),p=cc._decorator,s=p.ccclass,l=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.GetAttackGrounds=function(){var t=a.default.getManager(u.default).GetGroundByIndexAndDirection(this.Owner.Ground.Index,this.Owner.Direction);return[t[1],t[2]]},e.prototype.Attack=function(){cc.log("\u957f\u77db\u653b\u51fb");var t=this.GetAttackGrounds(),e=this;t.map(function(t){t&&t.Role&&t.Role.TakeDamage(e)}),this.AttackFinish()},i([s],e)}(c.default));o.default=l,cc._RF.pop()},{"../../manager/GroundManager":"GroundManager","../../manager/Singleton":"Singleton","./Weapon":"Weapon"}],Stage:[function(t,e,o){"use strict";cc._RF.push(e,"895e77Tm2FFJLmH2c7/Ga/h","Stage");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Wave"),a=t("../../com/Ground"),u=t("../../manager/Singleton"),p=t("../../manager/LevelManager"),s=cc._decorator,l=s.ccclass,f=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NextWaveNeedEnemyCount=1,e.GroundCount=1,e.Waves=[],e.Round=0,e}return r(e,t),Object.defineProperty(e.prototype,"Player",{get:function(){return u.default.GameManager.Player},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"IsLastWave",{get:function(){return this.Waves.indexOf(this.WaveNow)===this.Waves.length-1},enumerable:!1,configurable:!0}),e.prototype.Init=function(t){this.Level=t;var e=this;this.Waves.map(function(t){t.Init(e)})},e.prototype.OnStageReady=function(){var t=u.default.GroundManager;this.Player.ChangeGround(null),t.Ground.destroyAllChildren();for(var e=0;e<this.GroundCount;e++){var o=cc.instantiate(t.GroundPrefab);t.Ground.addChild(o),o.getComponent(a.default).Index=e}this.Player.OnStageReady()},e.prototype.OnLevelStart=function(){this.WaveNow=this.Waves[0],this.StartWave()},e.prototype.StartWave=function(){this.Round=0,this.WaveNow.StartWave()},e.prototype.OnStagePass=function(){this.Level.OnStagePass()},e.prototype.NextWave=function(){if(this.IsLastWave)this.OnStagePass();else{var t=this.Waves.indexOf(this.WaveNow);this.WaveNow=this.Waves[t+1],this.StartWave()}},e.prototype.OnRoundOver=function(){this.Round++;var t=u.default.EnemyManager.AliveEnemyCount;if(0!==t){if(!this.IsLastWave&&this.Round>=this.WaveNow.RoundCount&&t<=this.NextWaveNeedEnemyCount){var e=this.Waves[this.Waves.indexOf(this.WaveNow)+1];u.default.getManager(p.default).NoRoleGroundCount>=e.EnemyCount+1&&this.NextWave()}}else this.NextWave()},i([f(cc.Integer)],e.prototype,"NextWaveNeedEnemyCount",void 0),i([f(cc.Integer)],e.prototype,"GroundCount",void 0),i([f([c.default])],e.prototype,"Waves",void 0),i([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../com/Ground":"Ground","../../manager/LevelManager":"LevelManager","../../manager/Singleton":"Singleton","./Wave":"Wave"}],SwitchGroundManager:[function(t,e,o){"use strict";cc._RF.push(e,"0f010kMQTxFnK6cEhe0p1HL","SwitchGroundManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,u=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.Switch=function(t,e){var o=t.Ground;t.ChangeGround(e.Ground),e.ChangeGround(o)},i([a],e)}(cc.Component));o.default=u,cc._RF.pop()},{}],TestWeaponEnemy:[function(t,e,o){"use strict";cc._RF.push(e,"c33fdrwt7JAG4hhUqIMueTz","TestWeaponEnemy");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Enemy"),a=cc._decorator,u=a.ccclass,p=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.IsAttacked=!1,e.IsEquipEnough=!1,e}return r(e,t),e.prototype.ActionStart=function(){t.prototype.ActionStart.call(this)},e.prototype.ActionFinish=function(){t.prototype.ActionFinish.call(this)},e.prototype.AttackFinish=function(){this.IsAttacked=!0,t.prototype.AttackFinish.call(this)},e.prototype.OnEquipEnd=function(){this.CheckEquipEnough()&&(this.IsEquipEnough=!0)},e.prototype.StartAI=function(){var e=this.IsAttacked;this.IsAttacked=!1;var o=this.IsEquipEnough;this.IsEquipEnough=!1,this.CheckFaceToPlayer()?e?this.CheckMoveBack()&&(this.ActionNotice=c.ActionNoticeType.MovePrevious):this.CheckEquipEnough()?o?this.ActionNotice=c.ActionNoticeType.None:this.CheckFirstEquipWeaponAttackPlayer()?this.ActionNotice=c.ActionNoticeType.Attack:this.CheckMoveNext()?this.ActionNotice=c.ActionNoticeType.MoveNext:this.ActionNotice=c.ActionNoticeType.None:this.ActionNotice=c.ActionNoticeType.Equip:this.ActionNotice=c.ActionNoticeType.TurnAround,t.prototype.StartAI.call(this)},i([u],e)}(c.default));o.default=p,cc._RF.pop()},{"./Enemy":"Enemy"}],Utils:[function(t,e,o){"use strict";cc._RF.push(e,"918dcVAkvhMD5gOTTnLvvX2","Utils"),Object.defineProperty(o,"__esModule",{value:!0});var n,r=t("../manager/AssetController"),i=window.localStorage,c=Math.PI/180,a=180/Math.PI,u=function(){function t(){}return t.degreeToRadian=function(t){return t*c},t.radianToDegree=function(t){return t*a},t.getWorldSignAngleByDirection=function(t,e){var o=cc.v2(t),n=cc.v2(e);return this.radianToDegree(o.signAngle(n))},t.Lerp=function(t,e,o){return t+(e-t)*o},t.Range=function(t,e){var o=Math.random();return o*e+(1-o)*t},t.Clamp=function(t,e,o){return Math.max(Math.min(t,o),e)},t.getWorldDirectionBySignAngle=function(t,e){var o=cc.v2(e.x,e.y).rotateSelf(this.degreeToRadian(t));return cc.v3(o.x,o.y,0)},t.getSpriteFrame=function(t,e,o,n){if(n)return r.default.getRes(t,e+"/AutoAtlas").getSpriteFrame(o);var i=r.default.getRes(t,e+"/"+o);return new cc.SpriteFrame(i)},t.getPrefab=function(t,e,o){return r.default.getRes(t,e+"/"+o)},t.getData=function(t){var e=i.getItem(t);return e?JSON.parse(e):null},t.setData=function(t,e){var o=JSON.stringify(e);i.setItem(t,o)},t.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.log.apply(console,t)},t.checkSameDay=function(t){var e=new Date(t),o=e.getFullYear(),n=e.getMonth(),r=e.getDate(),i=new Date,c=i.getFullYear(),a=i.getMonth(),u=i.getDate();return o===c&&n===a&&r===u},t.getZeroData=function(){var t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.getTime()},t.formatTime=function(t,e){void 0===e&&(e=!0);var o=Math.floor(t/3600),n=Math.floor(t%3600/60),r=t%60,i=n>=10?n:"0"+n,c=r>=10?r:"0"+r;return e||o>0?(o>=10?o:"0"+o)+":"+i+":"+c:i+":"+c},t.shuffle=function(t){for(var e=t.length,o=0;o<e-1;o++){var n=Math.floor(Math.random()*(e-o)),r=t[n];t[n]=t[e-o-1],t[e-o-1]=r}return t},t.getWorldRect=function(t,e,o){return t.x-=.5*e,t.y-=.5*o,new cc.Rect(t.x,t.y,e,o)},t.getAABBTestCollidersByNode=function(t,e,o){void 0===e&&(e=0),void 0===o&&(o=0);var n=t.getWorldPos(),r=t.width*t.getWorldScales().scaleX+e,i=t.height*t.getWorldScales().scaleY+o,c=this.getWorldRect(n,r,i);return cc.director.getPhysicsManager().testAABB(c)},t.getAABBTestColliders=function(e,o,n){var r=t.getWorldRect(e,o,n);return cc.director.getPhysicsManager().testAABB(r)},t.getWorldPos=function(t){return t.parent.convertToWorldSpaceAR(t.position)},t.getComponent=function(t,e){return t.getComponent(e)},t.PHYSICS_TIMES=1,t}();o.default=u,String.prototype.format=function(){if(0===arguments.length)return this;var t=arguments[0],e=this;if("object"==typeof t){for(var o in t)e=e.replace(new RegExp("\\{"+o+"\\}","g"),t[o]);return e}for(var n=0;n<arguments.length;n++)e=e.replace(new RegExp("\\{"+n+"\\}","g"),arguments[n]);return e},(n=Array.prototype).remove=function(t){var e=this.indexOf(t);if(e>-1)return this.splice(e,1)},n.clean=function(t){for(var e=0;e<this.length;++e)t(this[e])&&delete this[e];var o=0;for(e=0;e<this.length;++e)void 0!==this[e]&&(this[o]=this[e],++o);this.length=o},n.unique=function(){this.sort();for(var t=0,e=0;e<this.length;++e)this[e]!==this[t]&&(this[++t]=this[e]);this.splice(t+1)},n.moveItem=function(t,e){for(var o=0;o<this.length;++o)if(this[o]===t){var n=o+e;if(n>=0&&n<this.length){var r=t;this[o]=this[n],this[n]=r}break}},cc.LabelOutline.prototype._updateRenderData=function(){var t=this.node.getComponent(cc.Label);t&&(t.isValid?t.setVertsDirty():cc.log("\u539f\u6765\u8fd9\u4e2a\u65f6\u5019\u5c31\u62a5\u9519\u4e86"))},cc.Node.prototype.getWorldPos=function(){return this.parent.convertToWorldSpaceAR(this.position).clone()},cc.Node.prototype.setWorldPos=function(t){var e=this.parent.convertToNodeSpaceAR(t);this.x=e.x,this.y=e.y},cc.Node.prototype.setWorldAngle=function(t){this.angle=function t(e,o){return o?t(e-=o.angle,o.parent):e}(t,this.parent)},cc.Node.prototype.getWorldAngle=function(){return function t(e,o){return o?t(e+=o.angle,o.parent):e}(this.angle,this.parent)},cc.Node.prototype.getWorldScales=function(){return function t(e,o,n){return n?t(e*=n.scaleX,o*=n.scaleY,n.parent):{scaleX:e,scaleY:o}}(this.scaleX,this.scaleY,this.parent)},window.Utils=u,cc._RF.pop()},{"../manager/AssetController":"AssetController"}],WXProxy:[function(t,e,o){"use strict";cc._RF.push(e,"6a10bTkxB5HgZKsIuYhjloa","WXProxy"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../manager/AssetController"),r=function(){function t(){}return Object.defineProperty(t,"Ins",{get:function(){return t._ins},enumerable:!1,configurable:!0}),t.prototype.wxLoadSubpackage=function(t){wx.loadSubpackage({name:t,success:function(e){n.default.onDownloadingSuccess(t,e)},fail:function(e){n.default.onDownloadingFail(t,e)}})},t._ins=new t,t}();o.default=r,cc._RF.pop()},{"../manager/AssetController":"AssetController"}],WXSdk:[function(t,e,o){"use strict";cc._RF.push(e,"5ef85bQTxNFDJFaOIRnG9lh","WXSdk");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var i=t("./H5Sdk"),c=t("./WXProxy"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.loadSubpackage=function(t,e){c.default.Ins.wxLoadSubpackage(t,e)},e}(i.default);o.default=a,cc._RF.pop()},{"./H5Sdk":"H5Sdk","./WXProxy":"WXProxy"}],Wave:[function(t,e,o){"use strict";cc._RF.push(e,"97ce6GJdfpIaaX/dQWTsZDn","Wave");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.EnemyConfig=o.EnemyData=void 0;var c=t("../../utils/MathUtils"),a=t("../../manager/Singleton"),u=t("../../manager/GroundManager"),p=t("../role/Role"),s=cc._decorator,l=s.ccclass,f=s.property,h=function(t){this.prefab=t};o.EnemyData=h;var d=function(){function t(){this.priority=0,this.Enemy=null,this.Min=1,this.Max=2}return i([f(cc.Integer)],t.prototype,"priority",void 0),i([f(cc.Prefab)],t.prototype,"Enemy",void 0),i([f(cc.Integer)],t.prototype,"Min",void 0),i([f(cc.Integer)],t.prototype,"Max",void 0),i([l("EnemyConfig")],t)}();o.EnemyConfig=d;var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.RoundCount=1,e.Enemies=[],e.EnemyDatum=[],e}return r(e,t),Object.defineProperty(e.prototype,"EnemyCount",{get:function(){return this.EnemyDatum.length},enumerable:!1,configurable:!0}),e.prototype.Init=function(t){this.Stage=t,this.EnemyDatum=[],this.Enemies.sort(function(t,e){return t.priority-e.priority});for(var e=0;e<this.Enemies.length;e++)for(var o=this.Enemies[e],n=c.default.RandomRangeInt(o.Min,o.Max),r=0;r<n;r++)this.EnemyDatum.push(new h(o.Enemy))},e.prototype.StartWave=function(){var t=a.default.getManager(u.default).GetRandomNoRoleGrounds();this.EnemyDatum.map(function(e,o){p.default.CreateRole(e.prefab,t[o])})},i([f(cc.Integer)],e.prototype,"RoundCount",void 0),i([f([d])],e.prototype,"Enemies",void 0),i([l()],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../manager/GroundManager":"GroundManager","../../manager/Singleton":"Singleton","../../utils/MathUtils":"MathUtils","../role/Role":"Role"}],WeaponCoolDownItem:[function(t,e,o){"use strict";cc._RF.push(e,"fd1e4Vx2c9LC4omP49vhQkU","WeaponCoolDownItem");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Red=null,e.White=null,e}return r(e,t),e.prototype.UpdateActive=function(t){this.White.active=!t,this.Red.active=t},i([u(cc.Node)],e.prototype,"Red",void 0),i([u(cc.Node)],e.prototype,"White",void 0),i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],WeaponCoolDown:[function(t,e,o){"use strict";cc._RF.push(e,"6a019M0xS5Eq59qvWykSy0v","WeaponCoolDown");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./WeaponCoolDownItem"),a=cc._decorator,u=a.ccclass,p=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Layout=null,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.SetCount=function(t){for(var e=0;e<this.Layout.childrenCount;e++)this.Layout.children[e].active=e<t},e.prototype.UpdateActive=function(t){for(var e=0;e<this.Layout.childrenCount;e++){var o=this.Layout.children[e];o.active&&o.getComponent(c.default).UpdateActive(e<t)}},i([p(cc.Node)],e.prototype,"Layout",void 0),i([u],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./WeaponCoolDownItem":"WeaponCoolDownItem"}],WeaponInfo:[function(t,e,o){"use strict";cc._RF.push(e,"c61ccmLrk1Lx5B1L0QOzXc3","WeaponInfo");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,i=r.ccclass,c=r.property,a=function(){function t(){this.AllSlotCount=1,this.CoolDown=1,this.Damage=1,this.Prefab=null}return n([c(cc.Integer)],t.prototype,"AllSlotCount",void 0),n([c(cc.Integer)],t.prototype,"CoolDown",void 0),n([c(cc.Integer)],t.prototype,"Damage",void 0),n([c(cc.Prefab)],t.prototype,"Prefab",void 0),n([i("WeaponInfo")],t)}();o.default=a,cc._RF.pop()},{}],Weapon:[function(t,e,o){"use strict";cc._RF.push(e,"f49ffclUSZOSZBKkcnJbqmM","Weapon");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,c=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,o,c):r(e,o))||c);return i>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../utils/Constant"),a=t("../../manager/Singleton"),u=t("../../utils/LogicEventDispatcher"),p=t("./CoolDown/WeaponCoolDown"),s=cc._decorator,l=s.ccclass,f=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.AllSlotCount=1,e.CoolDown=1,e.Damage=1,e.itemHeight=63,e.WeaponName="",e.CoolDownVisual=null,e.CoolDownNow=0,e.IsPlayerEquip=!1,e.IsInPlayerWeapons=!1,e.KillEnemyCount=0,e}var o;return r(e,t),o=e,e.CreateWeapon=function(t,e,n,r,i){void 0===n&&(n=null),void 0===r&&(r=!1),void 0===i&&(i=!1);var c=t.Prefab,a=cc.instantiate(c);e.addChild(a);var u=a.getComponent(o);return t.WeaponName=u.WeaponName,u.Init(t,n,r,i),u},Object.defineProperty(e.prototype,"IsCombo",{get:function(){return this.KillEnemyCount>1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Player",{get:function(){return a.default.GameManager.Player},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"IsPlayerWeapon",{get:function(){return this.Owner===this.Player},enumerable:!1,configurable:!0}),e.prototype.Init=function(t,e,o,n){void 0===e&&(e=null),void 0===o&&(o=!1),void 0===n&&(n=!1),this.Owner=e,this.CoolDown=t.CoolDown,this.AllSlotCount=t.AllSlotCount,this.Damage=t.Damage,this.IsPlayerEquip=o,this.IsInPlayerWeapons=n,o||n?(this.CoolDownVisual.node.active=!0,this.CoolDownVisual.SetCount(this.CoolDown),this.CoolDownVisual.UpdateActive(this.CoolDownNow)):this.CoolDownVisual.node.active=!1},e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.OnTouchClick,this),u.default.on("RoundOver",this.OnRoundOver,this)},e.prototype.OnTouchClick=function(){a.default.InputManager.canInput&&(this.IsPlayerEquip?u.default.emit("OnPlayerEquipWeaponClick",this):this.IsInPlayerWeapons&&this.Player.EquipNode.childrenCount<c.MAX_EQUIP_COUNT&&this.CoolDownNow<=0&&this.Player.Equip(this))},e.prototype.Equip=function(){this.node.active=!0,this.node.removeFromParent(!1),this.Owner.EquipNode.addChild(this.node),this.changeWeaponListLenght(),this.node.x=0},e.prototype.GetAttackGrounds=function(){return[]},e.prototype.KillEnemy=function(){this.KillEnemyCount=++this.Player.RoundKillCount},e.prototype.Attack=function(){},e.prototype.AttackFinish=function(){this.node.active=!1,this.node.removeFromParent(!1),this.Owner.WeaponTempNode.addChild(this.node),this.changeWeaponListLenght();var t=this;setTimeout(function(){t.Owner.TryAttack()},0)},e.prototype.changeWeaponListLenght=function(){var t=this.Owner.EquipNode.getComponent(cc.Layout);this.Owner.EquipNode.height=(this.itemHeight+t.spacingY)*this.Owner.EquipNode.childrenCount+t.paddingBottom,0==this.Owner.EquipNode.childrenCount&&(this.Owner.EquipNode.height=0)},e.prototype.MoveToPlayerWeapons=function(t){this.node.removeFromParent(!1),a.default.GameManager.PlayerWeaponsNode.addChild(this.node),this.node.y=0,this.IsInPlayerWeapons=!0,this.IsPlayerEquip=!1,t||(this.IsPlayerWeapon&&(this.IsCombo?this.CoolDownNow=0:this.CoolDownNow=this.CoolDown,this.CoolDownNow=Math.max(0,this.CoolDownNow),this.CoolDownVisual.UpdateActive(this.CoolDownNow)),this.KillEnemyCount=0)},e.prototype.OnRoundOver=function(){this.IsPlayerWeapon&&(this.CoolDownNow--,this.CoolDownNow=Math.max(0,this.CoolDownNow),this.CoolDownVisual.UpdateActive(this.CoolDownNow))},e.prototype.CheckAttackPlayer=function(){return-1!==this.GetAttackGrounds().indexOf(this.Player.Ground)},e.prototype.onDestroy=function(){u.default.targetOff(this)},i([f(cc.Integer)],e.prototype,"itemHeight",void 0),i([f(cc.String)],e.prototype,"WeaponName",void 0),i([f(p.default)],e.prototype,"CoolDownVisual",void 0),o=i([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../manager/Singleton":"Singleton","../../utils/Constant":"Constant","../../utils/LogicEventDispatcher":"LogicEventDispatcher","./CoolDown/WeaponCoolDown":"WeaponCoolDown"}]},{},["GameOverPage","GamePage","LoadingPage","Ground","Level","Stage","Wave","Player","Role","Enemy","KnifeEnemy","SpearEnemy","TestWeaponEnemy","HpItemVisual","HpVisual","Arrow","WeaponCoolDown","WeaponCoolDownItem","DoubleKnife","Knife","RunBackward ","RunForward","Smoke","Spear","Weapon","WeaponInfo","AnimatorController","AssetController","AudioManager","DebugManager","EnemyManager","FlashToGroundManager","GameManager","GroundManager","InputManager","LevelManager","MoveToGroundManager","PanelManager","PoolManager","RoundManager","Singleton","SwitchGroundManager","H5Sdk","SdkChoose","WXProxy","WXSdk","Array","CallBackInfo","CallBackInfoWithArgs","Constant","LogicEventDispatcher","MathUtils","Utils"]);